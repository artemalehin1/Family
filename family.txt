//Взаимодейсвие с пикапом
if(IsPlayerInRangeOfPoint(playerid,1.0, 124.6455,122.6624,1003.0521)) {
    D(playerid, D_FAMILY_OFFICE, DSL, ""P"Семейный центр", ""P"1."W" Создать семью\n"P"2."W" Рейтинг семей", "Выбрать", "Отмена");
}
//OnDialogReponse
case D_FAMILY_OFFICE: {
        if(!response) return true;
        switch(listitem) {
        case 0: D(playerid,D_FAMILY_CREATE,DSI, ""P"Создание семьи","\n\n"W"Название семьи должно состоять от 6 до 30 символов.\n\nСтоимость создания семьи - "GREEN"2.000.000$\n\n"W"Введите ниже название семьи:","Создать","Отмена");
        case 1: D(playerid,D_FAMILY_OFFICE_1,DSL, ""P"Рейтинг семей",""P"1."W" По рейтингу\n"P"2."W" По талонам","Выбрать","Отмена");
        }
    }
case D_FAMILY_CREATE: {
        if(!response) return 1;
        if(PI[playerid][pFamily] > 0) return SendClientMessage(playerid, COLOR_GREY, "Вы состоите в семье");
        if(!strlen(inputtext) || strlen(inputtext) < 6 || strlen(inputtext) > 30) {
            D(playerid,D_FAMILY_CREATE,DSI, ""P"Создание семьи","\n\n"W"Название семьи должно состоять от 6 до 30 символов.\n\nСтоимость создания семьи - "GREEN"2.000.000$\n\n"W"Введите ниже название семьи:","Создать","Отмена");
            return true;
        }
        if(isnull(inputtext)) {
            D(playerid,D_FAMILY_CREATE,DSI, ""P"Создание семьи","\n\n"W"Название семьи должно состоять от 6 до 30 символов.\n\nСтоимость создания семьи - "GREEN"2.000.000$\n\n"W"Введите ниже название семьи:","Создать","Отмена");
            return true;
        }
        if(PI[playerid][pCash] < 2000000) return SendClientMessage(playerid, COLOR_GREY, "У Вас недостаточно денег");
        create_family(playerid, inputtext);
        GiveMoney(playerid,-2000000,"создание семьи");
    }
//
stock create_family(playerid, inputtext[]) {
	if(TotalFamily >= FAMILY_COUNT) return SendClientMessage(playerid, COLOR_GREY, "На сервере достигнут лимит семей");
	new query[128];
	mysql_format(connects, query, sizeof(query),"SELECT * FROM family WHERE name = '%s'",inputtext);
	new Cache:result = mysql_query(connects, query);
	if(cache_num_rows()) {
		SendClientMessage(playerid, COLOR_GREY, "Семья с таким именем уже существует");
		cache_delete(result);
		return 1;
	}
	cache_delete(result);
	strmid(gFamily[TotalFamily][famCName],inputtext,0,strlen(inputtext),strlen(inputtext)+1);
	strmid(gFamily[TotalFamily][famName],inputtext,0,strlen(inputtext),strlen(inputtext)+1);
	SetString(FamRanks[TotalFamily][0],"None");
	SetString(FamRanks[TotalFamily][1],"None");
	SetString(FamRanks[TotalFamily][2],"None");
	SetString(FamRanks[TotalFamily][3],"None");
	SetString(FamRanks[TotalFamily][4],"None");
	SetString(FamRanks[TotalFamily][5],"None");
	SetString(FamRanks[TotalFamily][6],"None");
	SetString(FamRanks[TotalFamily][7],"None");
	SetString(FamRanks[TotalFamily][8],"None");
	SetString(gFamily[TotalFamily][famMessage],"None");
	gFamily[TotalFamily][famInvRang] = gFamily[TotalFamily][famUninvRang] = gFamily[TotalFamily][famGiveRang] = 7;
	new string[128];
	format(string,sizeof(string),"Поздравляем с созданием семьи - "ORANGE"%s",gFamily[TotalFamily][famCName]);
	SendUse(playerid,string);
	SendOk(playerid,"Управление семьей - /fmenu");
	PI[playerid][pFamily] = TotalFamily + 1;
	UpdatePlayerData(playerid,"family",PI[playerid][pFamily]);
	PI[playerid][pFamRank] = 8;
	UpdatePlayerData(playerid,"pFamRank",8);
	strmid(gFamily[TotalFamily][famCOwner],player_name[playerid],0,strlen(player_name[playerid]),MAX_PLAYER_NAME);
	strmid(gFamily[TotalFamily][famOwner],player_name[playerid],0,strlen(player_name[playerid]),MAX_PLAYER_NAME);

	gFamily[TotalFamily][famSpawnCar] = 7;
	gFamily[TotalFamily][famBuyCar] = 7;
	gFamily[TotalFamily][famSkladMoney] = 7;

	new querys[513];
	mysql_format(connects, querys, sizeof(querys),"INSERT INTO `family`(`cname`,`name`,`time`,`cowner`,`owner`,`car_rank`,`spawn_rank`,`money_rank`) VALUES ('%s','%s',NOW(),'%s','%s','7','7','7')",
	gFamily[TotalFamily][famCName],gFamily[TotalFamily][famName],gFamily[TotalFamily][famCOwner],gFamily[TotalFamily][famOwner]);
	mysql_tquery(connects, querys, "creategFamily", "i", TotalFamily);
	TotalFamily++;
	return true;
}
